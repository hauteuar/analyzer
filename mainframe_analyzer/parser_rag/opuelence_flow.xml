<mxfile host="app.diagrams.net">
  <diagram id="workflow" name="Copilot-Class">
    <mxGraphModel dx="1354" dy="722" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1000" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Voice Agent -->
        <mxCell id="voiceAgent" value="VoiceAgent&#10;• Speech-to-text&#10;• Hands-free queries" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry x="60" y="60" width="200" height="110" as="geometry"/>
        </mxCell>

        <!-- UI -->
        <mxCell id="ui" value="User Interface&#10;• Chat UI&#10;• Voice or text input" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry x="330" y="60" width="200" height="110" as="geometry"/>
        </mxCell>

        <mxCell id="edge1" edge="1" source="voiceAgent" target="ui" style="endArrow=block;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Classifier -->
        <mxCell id="classifier" value="QueryClassifier&#10;• Intent detection&#10;• Route to department" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry x="600" y="60" width="220" height="110" as="geometry"/>
        </mxCell>

        <mxCell id="edge2" edge="1" source="ui" target="classifier" style="endArrow=block;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Departments -->
        <mxCell id="deptSRR" value="Service Request (SRR)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry x="300" y="250" width="200" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="deptPricing" value="Pricing" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry x="550" y="250" width="200" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="deptTax" value="Tax Lots" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry x="800" y="250" width="200" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="edge3a" edge="1" source="classifier" target="deptSRR" style="endArrow=block;dashed=1;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="edge3b" edge="1" source="classifier" target="deptPricing" style="endArrow=block;dashed=1;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="edge3c" edge="1" source="classifier" target="deptTax" style="endArrow=block;dashed=1;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Subdepartment MCP -->
        <mxCell id="mcp" value="MCP Agent&#10;• DB Calls&#10;• RAG Docs&#10;• AI Bloating/Compression" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry x="550" y="400" width="240" height="130" as="geometry"/>
        </mxCell>

        <mxCell id="edge4" edge="1" source="deptPricing" target="mcp" style="endArrow=block;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- DB -->
        <mxCell id="db" value="Database Server&#10;• Pricing&#10;• Tax Lots&#10;• SRR" style="shape=cylinder;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry x="300" y="600" width="160" height="140" as="geometry"/>
        </mxCell>

        <mxCell id="edge5" edge="1" source="mcp" target="db" style="endArrow=block;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Documentation RAG -->
        <mxCell id="docs" value="Document RAG&#10;• Policies&#10;• Procedures&#10;• Knowledge base" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry x="750" y="600" width="180" height="120" as="geometry"/>
        </mxCell>

        <mxCell id="edge6" edge="1" source="mcp" target="docs" style="endArrow=block;">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
