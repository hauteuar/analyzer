<mxfile host="app.diagrams.net">
  <diagram id="diagram1" name="Sequence">
    <mxGraphModel dx="1500" dy="900" grid="1" gridSize="10" guides="1">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- ROW OF NODES -->
        <mxCell id="User" value="User" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="120" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="VoiceIn" value="Voice Input (Speech)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="40" width="160" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="STT" value="STT Engine (Speech-to-Text)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="400" y="40" width="200" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="UI" value="Common UI" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="650" y="40" width="140" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="Orch" value="Copilot Orchestrator" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="850" y="40" width="180" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="Classifier" value="Intent Classifier" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1100" y="40" width="160" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="Dept" value="Department Router" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1300" y="40" width="160" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="SubAgent" value="Sub-Department Agent" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1500" y="40" width="180" height="50" as="geometry"/>
        </mxCell>

        <mxCell id="MCP" value="MCP Router" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1720" y="40" width="140" height="50" as="geometry"/>
        </mxCell>

        <!-- SECOND ROW -->
        <mxCell id="DB" value="DB Server" style="shape=cylinder;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1720" y="200" width="140" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="Docs" value="Documentation RAG" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1500" y="200" width="180" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="Composer" value="Response Composer" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1100" y="200" width="180" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="TTS" value="TTS Engine" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="850" y="200" width="180" height="70" as="geometry"/>
        </mxCell>

        <!-- ARROWS -->
        <mxCell id="a1" edge="1" parent="1" source="User" target="VoiceIn" style="endArrow=classic"/>
        <mxCell id="a2" edge="1" parent="1" source="VoiceIn" target="STT" style="endArrow=classic"/>
        <mxCell id="a3" edge="1" parent="1" source="STT" target="UI" style="endArrow=classic;dashed=1"/>
        <mxCell id="a4" edge="1" parent="1" source="User" target="UI" style="endArrow=classic;dashed=1"/>

        <mxCell id="a5" edge="1" parent="1" source="UI" target="Orch" style="endArrow=classic"/>
        <mxCell id="a6" edge="1" parent="1" source="Orch" target="Classifier" style="endArrow=classic"/>
        <mxCell id="a7" edge="1" parent="1" source="Classifier" target="Dept" style="endArrow=classic"/>
        <mxCell id="a8" edge="1" parent="1" source="Dept" target="SubAgent" style="endArrow=classic"/>
        <mxCell id="a9" edge="1" parent="1" source="SubAgent" target="MCP" style="endArrow=classic"/>

        <mxCell id="a10" edge="1" parent="1" source="MCP" target="DB" style="endArrow=classic"/>
        <mxCell id="a11" edge="1" parent="1" source="DB" target="MCP" style="endArrow=classic;dashed=1"/>
        <mxCell id="a12" edge="1" parent="1" source="MCP" target="Docs" style="endArrow=classic"/>
        <mxCell id="a13" edge="1" parent="1" source="Docs" target="MCP" style="endArrow=classic;dashed=1"/>

        <mxCell id="a14" edge="1" parent="1" source="MCP" target="SubAgent" style="endArrow=classic;dashed=1"/>
        <mxCell id="a15" edge="1" parent="1" source="SubAgent" target="Composer" style="endArrow=classic"/>
        <mxCell id="a16" edge="1" parent="1" source="Composer" target="UI" style="endArrow=classic"/>

        <mxCell id="a17" edge="1" parent="1" source="Composer" target="TTS" style="endArrow=classic"/>
        <mxCell id="a18" edge="1" parent="1" source="TTS" target="User" style="endArrow=classic"/>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
