<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net">
  <diagram name="SPP Batch Flow">
    <mxGraphModel dx="1324" dy="812" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        <!-- Background page title -->
        <mxCell id="title" value="SPP BATCH FLOW" style="text;html=1;strokeColor=none;fontSize=18;fontStyle=1;align=center;verticalAlign=top;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="220" y="10" width="520" height="30" as="geometry"/>
        </mxCell>

        <!-- Timeline bar (top) -->
        <mxCell id="timeline" value="" style="shape=swimlane;horizontal=1;startSize=20;rounded=0;fillColor=#EAF2FF;strokeColor=#9FBFF6;" vertex="1" parent="1">
          <mxGeometry x="40" y="50" width="740" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="timeLabel10" value="10 AM EST (Current Day)" style="text;html=1;fontSize=11;align=left;verticalAlign=middle;whiteSpace=wrap;" vertex="1" parent="timeline">
          <mxGeometry x="10" y="6" width="200" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="timeLabel840" value="8:40 PM EST - EOD/PTRIGGER" style="text;html=1;fontSize=11;align=center;verticalAlign=middle;whiteSpace=wrap;fontStyle=1" vertex="1" parent="timeline">
          <mxGeometry x="240" y="6" width="260" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="timeLabel900" value="9:00 PM EST - MANUAL PRICING DB PUSH" style="text;html=1;fontSize=11;align=right;verticalAlign=middle;whiteSpace=wrap;" vertex="1" parent="timeline">
          <mxGeometry x="520" y="6" width="200" height="20" as="geometry"/>
        </mxCell>

        <!-- Vertical Swimlane left: Extract Leg -->
        <mxCell id="extractLeg" value="EXTRACT LEG" style="shape=rectangle;rounded=1;fillColor=#DFF0D8;strokeColor=#9ACA8F;fontSize=12;align=center;verticalAlign=middle;" vertex="1" parent="1">
          <mxGeometry x="40" y="150" width="260" height="420" as="geometry"/>
        </mxCell>
        <mxCell id="extractSubLabel" value="9:30 PM ET - Downstream Feeds completed" style="text;html=1;fontSize=10;align=center;verticalAlign=top;whiteSpace=wrap;" vertex="1" parent="extractLeg">
          <mxGeometry x="10" y="8" width="240" height="18" as="geometry"/>
        </mxCell>
        <mxCell id="pbPriceExtracts" value="PB Price Extracts\n(9-10PM ET)" style="shape=note;labelPosition=center;verticalLabelPosition=middle;fontSize=11;whiteSpace=wrap;rounded=1;fillColor=#F5F5F5;strokeColor=#BFBFBF;" vertex="1" parent="extractLeg">
          <mxGeometry x="30" y="60" width="200" height="60" as="geometry"/>
        </mxCell>

        <!-- Database column (center) -->
        <mxCell id="dbColumn" value="DATABASE" style="shape=rectangle;rounded=1;fillColor=#F0F0F0;strokeColor=#BDBDBD;fontSize=12;align=center;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="330" y="150" width="220" height="420" as="geometry"/>
        </mxCell>
        <!-- Oracle cylinder -->
        <mxCell id="oracle" value="Oracle" style="shape=cylinder;fontSize=12;align=center;verticalAlign=middle;fillColor=#2E86C1;strokeColor=#164A7A;fontColor=#ffffff;" vertex="1" parent="dbColumn">
          <mxGeometry x="60" y="120" width="100" height="120" as="geometry"/>
        </mxCell>
        <!-- DB time label -->
        <mxCell id="dbTime" value="SPP DB" style="text;html=1;fontSize=11;align=center;verticalAlign=bottom;whiteSpace=wrap;" vertex="1" parent="dbColumn">
          <mxGeometry x="10" y="6" width="200" height="18" as="geometry"/>
        </mxCell>

        <!-- Load Leg (right side) -->
        <mxCell id="loadLeg" value="LOAD LEG" style="shape=rectangle;rounded=1;fillColor=#FFF1CC;strokeColor=#E1C06A;fontSize=12;align=center;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="570" y="150" width="210" height="420" as="geometry"/>
        </mxCell>
        <mxCell id="vendorFeedsLabel" value="VENDOR FEEDS" style="text;html=1;fontSize=11;align=center;verticalAlign=top;whiteSpace=wrap;fontStyle=1" vertex="1" parent="loadLeg">
          <mxGeometry x="12" y="8" width="185" height="18" as="geometry"/>
        </mxCell>

        <!-- Vendor boxes inside load leg -->
        <mxCell id="vendor1" value="Vendor - Update A" style="shape=rectangle;rounded=1;fillColor=#FFF7E6;strokeColor=#E6C892;fontSize=11;align=left;whiteSpace=wrap;" vertex="1" parent="loadLeg">
          <mxGeometry x="20" y="60" width="170" height="40" as="geometry"/>
        </mxCell>
        <mxCell id="vendor2" value="Vendor - Update B" style="shape=rectangle;rounded=1;fillColor=#FFF7E6;strokeColor=#E6C892;fontSize=11;align=left;whiteSpace=wrap;" vertex="1" parent="loadLeg">
          <mxGeometry x="20" y="115" width="170" height="40" as="geometry"/>
        </mxCell>

        <!-- Manual Pricing DB Push box under timeline area -->
        <mxCell id="manualPush" value="MANUAL PRICING DB PUSH\n(9:00 PM EST) (Success required for Downstream Extract Release)" style="shape=rounded;rounded=1;fillColor=#FFEFCF;strokeColor=#E8B64B;fontSize=11;align=left;verticalAlign=middle;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="170" y="240" width="360" height="80" as="geometry"/>
        </mxCell>

        <!-- EOD/PTRIGGER box -->
        <mxCell id="eodTrigger" value="EOD / PTRIGGER\n(8:40 PM EST)\n(Automatic trigger based on completion of Vendor Feeds)" style="shape=rounded;fillColor=#FBEFEF;strokeColor=#E8A7A7;fontSize=11;align=left;verticalAlign=middle;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="170" y="170" width="360" height="60" as="geometry"/>
        </mxCell>

        <!-- SPP BATCH FLOW vertical arrow on the right -->
        <mxCell id="sppFlow" value="SPP BATCH FLOW" style="text;html=1;rotation=90;fontSize=12;align=center;verticalAlign=middle;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="820" y="120" width="20" height="360" as="geometry"/>
        </mxCell>

        <!-- Extract leg -> Oracle arrow -->
        <mxCell id="edge_extract_to_oracle" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#3B873A;endArrow=block;" edge="1" parent="1" source="pbPriceExtracts" target="oracle">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Oracle -> Vendor feeds arrow (load) -->
        <mxCell id="edge_oracle_to_vendor" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#7A4A0A;endArrow=block;" edge="1" parent="1" source="oracle" target="vendor1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- EOD trigger -> Manual push (arrow) -->
        <mxCell id="edge_eod_to_manual" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#A0522D;endArrow=block;" edge="1" parent="1" source="eodTrigger" target="manualPush">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Manual push -> Oracle (arrow) -->
        <mxCell id="edge_manual_to_oracle" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeColor=#2E86C1;endArrow=block;" edge="1" parent="1" source="manualPush" target="oracle">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Labels for flows (left small legend) -->
        <mxCell id="legend" value="Legend:" style="text;html=1;fontSize=11;align=left;whiteSpace=wrap;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="590" width="120" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="legendData" value="Blue arrow: Load Flow\nGreen arrow: Extract Flow\nBrown arrow: Trigger/Control" style="text;html=1;fontSize=10;align=left;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="50" y="610" width="210" height="60" as="geometry"/>
        </mxCell>

        <!-- Triggers and PB TRG from UI -->
        <mxCell id="pbtrg" value="PB TRG (From UI)" style="shape=rounded;fillColor=#FFF;strokeColor=#AFAFAF;fontSize=11;align=left;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="60" y="200" width="140" height="36" as="geometry"/>
        </mxCell>
        <mxCell id="edge_pbtrg_to_manual" style="edgeStyle=elbowConnector;rounded=1;html=1;strokeColor=#8B4513;endArrow=open;" edge="1" parent="1" source="pbtrg" target="manualPush">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Small note under diagram with times -->
        <mxCell id="bottomNote" value="Extract Leg (Next Day) starts at 9:50 AM EST in original diagram.  (Times shown are EST/ET where noted.)" style="text;html=1;fontSize=10;align=left;whiteSpace=wrap;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="40" y="705" width="740" height="40" as="geometry"/>
        </mxCell>

        <!-- Outline boxes connectors for visual grouping -->
        <mxCell id="group1" value="" style="shape=rectangle;rounded=1;dashed=0;strokeColor=#C0C0C0;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="30" y="140" width="760" height="450" as="geometry"/>
        </mxCell>

        <!-- Make sure edges have visible labels where applicable -->
        <mxCell id="edge_label1" value="Downstream Feeds completed" style="text;html=1;fontSize=10;align=center;verticalAlign=middle;rounded=0;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="370" y="310" width="160" height="20" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
